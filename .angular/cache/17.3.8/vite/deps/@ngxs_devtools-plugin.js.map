{
  "version": 3,
  "sources": ["../../../../../node_modules/@ngxs/devtools-plugin/fesm2015/ngxs-devtools-plugin.js"],
  "sourcesContent": ["import * as i0 from '@angular/core';\nimport { InjectionToken, ɵglobal, Injectable, Inject, NgModule } from '@angular/core';\nimport { Store, getActionTypeFromInstance, InitState, NGXS_PLUGINS } from '@ngxs/store';\nimport { catchError, tap } from 'rxjs/operators';\nconst NGXS_DEVTOOLS_OPTIONS = new InjectionToken('NGXS_DEVTOOLS_OPTIONS');\n\n/**\n * Adds support for the Redux Devtools extension:\n * http://extension.remotedev.io/\n */\nclass NgxsReduxDevtoolsPlugin {\n  constructor(_options, _injector, _ngZone) {\n    this._options = _options;\n    this._injector = _injector;\n    this._ngZone = _ngZone;\n    this.devtoolsExtension = null;\n    this.globalDevtools = ɵglobal['__REDUX_DEVTOOLS_EXTENSION__'] || ɵglobal['devToolsExtension'];\n    this.unsubscribe = null;\n    this.connect();\n  }\n  ngOnDestroy() {\n    if (this.unsubscribe !== null) {\n      this.unsubscribe();\n    }\n    if (this.globalDevtools) {\n      this.globalDevtools.disconnect();\n    }\n  }\n  /**\n   * Lazy get the store for circular dependency issues\n   */\n  get store() {\n    return this._injector.get(Store);\n  }\n  /**\n   * Middleware handle function\n   */\n  handle(state, action, next) {\n    if (!this.devtoolsExtension || this._options.disabled) {\n      return next(state, action);\n    }\n    return next(state, action).pipe(catchError(error => {\n      const newState = this.store.snapshot();\n      this.sendToDevTools(state, action, newState);\n      throw error;\n    }), tap(newState => {\n      this.sendToDevTools(state, action, newState);\n    }));\n  }\n  sendToDevTools(state, action, newState) {\n    const type = getActionTypeFromInstance(action);\n    // if init action, send initial state to dev tools\n    const isInitAction = type === InitState.type;\n    if (isInitAction) {\n      this.devtoolsExtension.init(state);\n    } else {\n      this.devtoolsExtension.send(Object.assign(Object.assign({}, action), {\n        action: null,\n        type\n      }), newState);\n    }\n  }\n  /**\n   * Handle the action from the dev tools subscription\n   */\n  dispatched(action) {\n    if (action.type === \"DISPATCH\" /* Dispatch */) {\n      if (action.payload.type === \"JUMP_TO_ACTION\" /* JumpToAction */ || action.payload.type === \"JUMP_TO_STATE\" /* JumpToState */) {\n        const prevState = JSON.parse(action.state);\n        // This makes the DevTools and Router plugins compatible with each other.\n        // We check for the existence of the `router` state and ensure it has the\n        // `trigger` property, confirming that it is our router state (coming from `@ngxs/router-plugin`).\n        // This enables a time-traveling feature, as it not only restores the state but\n        // also allows the `RouterState` to navigate back when the action is jumped.\n        if (prevState.router && prevState.router.trigger) {\n          prevState.router.trigger = 'devtools';\n        }\n        this.store.reset(prevState);\n      } else if (action.payload.type === \"TOGGLE_ACTION\" /* ToggleAction */) {\n        console.warn('Skip is not supported at this time.');\n      } else if (action.payload.type === \"IMPORT_STATE\" /* ImportState */) {\n        const {\n          actionsById,\n          computedStates,\n          currentStateIndex\n        } = action.payload.nextLiftedState;\n        this.devtoolsExtension.init(computedStates[0].state);\n        Object.keys(actionsById).filter(actionId => actionId !== '0').forEach(actionId => this.devtoolsExtension.send(actionsById[actionId], computedStates[actionId].state));\n        this.store.reset(computedStates[currentStateIndex].state);\n      }\n    } else if (action.type === \"ACTION\" /* Action */) {\n      const actionPayload = JSON.parse(action.payload);\n      this.store.dispatch(actionPayload);\n    }\n  }\n  connect() {\n    if (!this.globalDevtools || this._options.disabled) {\n      return;\n    }\n    // The `connect` method adds a `message` event listener to communicate\n    // with an extension through `window.postMessage` and handle message events.\n    // Since we only handle two specific events, we aim to avoid unnecessary change\n    // detections triggered by events that the extension sends, but we don't need to handle.\n    this.devtoolsExtension = this._ngZone.runOutsideAngular(() => this.globalDevtools.connect(this._options));\n    this.unsubscribe = this.devtoolsExtension.subscribe(action => {\n      if (action.type === \"DISPATCH\" /* Dispatch */ || action.type === \"ACTION\" /* Action */) {\n        this.dispatched(action);\n      }\n    });\n  }\n}\n/** @nocollapse */\nNgxsReduxDevtoolsPlugin.ɵfac = function NgxsReduxDevtoolsPlugin_Factory(t) {\n  return new (t || NgxsReduxDevtoolsPlugin)(i0.ɵɵinject(NGXS_DEVTOOLS_OPTIONS), i0.ɵɵinject(i0.Injector), i0.ɵɵinject(i0.NgZone));\n};\n/** @nocollapse */\nNgxsReduxDevtoolsPlugin.ɵprov = /* @__PURE__ */i0.ɵɵdefineInjectable({\n  token: NgxsReduxDevtoolsPlugin,\n  factory: NgxsReduxDevtoolsPlugin.ɵfac\n});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxsReduxDevtoolsPlugin, [{\n    type: Injectable\n  }], function () {\n    return [{\n      type: undefined,\n      decorators: [{\n        type: Inject,\n        args: [NGXS_DEVTOOLS_OPTIONS]\n      }]\n    }, {\n      type: i0.Injector\n    }, {\n      type: i0.NgZone\n    }];\n  }, null);\n})();\nfunction devtoolsOptionsFactory(options) {\n  return Object.assign({\n    name: 'NGXS'\n  }, options);\n}\nconst USER_OPTIONS = new InjectionToken('USER_OPTIONS');\nclass NgxsReduxDevtoolsPluginModule {\n  static forRoot(options) {\n    return {\n      ngModule: NgxsReduxDevtoolsPluginModule,\n      providers: [{\n        provide: NGXS_PLUGINS,\n        useClass: NgxsReduxDevtoolsPlugin,\n        multi: true\n      }, {\n        provide: USER_OPTIONS,\n        useValue: options\n      }, {\n        provide: NGXS_DEVTOOLS_OPTIONS,\n        useFactory: devtoolsOptionsFactory,\n        deps: [USER_OPTIONS]\n      }]\n    };\n  }\n}\n/** @nocollapse */\nNgxsReduxDevtoolsPluginModule.ɵfac = function NgxsReduxDevtoolsPluginModule_Factory(t) {\n  return new (t || NgxsReduxDevtoolsPluginModule)();\n};\n/** @nocollapse */\nNgxsReduxDevtoolsPluginModule.ɵmod = /* @__PURE__ */i0.ɵɵdefineNgModule({\n  type: NgxsReduxDevtoolsPluginModule\n});\n/** @nocollapse */\nNgxsReduxDevtoolsPluginModule.ɵinj = /* @__PURE__ */i0.ɵɵdefineInjector({});\n(() => {\n  (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(NgxsReduxDevtoolsPluginModule, [{\n    type: NgModule\n  }], null, null);\n})();\n\n/**\n * The public api for consumers of @ngxs/devtools-plugin\n */\n\n/**\n * Generated bundle index. Do not edit.\n */\n\nexport { NGXS_DEVTOOLS_OPTIONS, NgxsReduxDevtoolsPlugin, NgxsReduxDevtoolsPluginModule };\n"],
  "mappings": "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",
  "names": []
}
